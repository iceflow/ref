scgi: 自行修改的Python Server处理流程， 针对自带scgiserver处理性能不高问题Python scgi serve


Leo chen 13:24:36
还记得有什么原因吗？
陈亮 13:24:39
那个多是进程啊 
陈亮 13:24:46
这个是epoll单进程 
陈亮 13:24:53
对了， 那个有点问题，  
陈亮 13:25:06
那天这里要用的时候翻出来用的时候发现的 
陈亮 13:25:38
那个多进程的话， 访问量大了， 就该页无法访问了，  
陈亮 13:25:42
所以从写的 
Leo chen 13:26:39
就是scgi 自己的处理，多进程模式，大访问量，会出现页面无法访问
陈亮 13:27:02
我都测试过压力的， 当时有问题， 才自己写的 
陈亮 13:27:11
发你一份修改好的 
Leo chen 13:31:50
好的

Leo chen 13:32:22
你修改的这个模型是单进程，多线程的？
陈亮 13:40:55
单进程的， 但是如果处理比较大量的东西可以创建一个线程去做 
Leo chen 13:41:49
scgi自带的socket处理，单进程有什么问题？
陈亮 13:46:04
如果很多访问不就处理不了了 
陈亮 13:48:10
咋了， 那个不行了 
陈亮 13:48:39
我测试过性能， 还不错的 
Leo chen 13:48:44
不是，他们在改webssl，弄不明白为什么不用自带的处理
陈亮 13:49:05
自带的性能不行， 压力测试过 
陈亮 13:49:10
除非有其他的 
Leo chen2013-05-13 13:49:46
总结一下：都是单进程模式，不过自带的性能差，自己写的压力测试ok？
Leo chen2013-05-13 13:50:21
使用 ab 测试，还是自己写的web测试
陈亮2013-05-13 13:52:51
ab
陈亮2013-05-13 13:52:55
你可以测试下
陈亮2013-05-13 13:53:25
那个webssl8.0的管理的是用自带的写的， webssl是自己写的
陈亮2013-05-13 13:53:31
你可以压力测试一下吧
陈亮2013-05-13 13:53:51
就是王写的那个是用自带的
陈亮2013-05-13 13:54:14
李国栋
陈亮2013-05-13 13:54:16
写的那个
 2013-05-13 13:57:53
对方给您发送文件:
 post_data.py [同意] [拒绝]
 2013-05-13 13:57:53
对方给您发送文件:
 ScgiServer.py [同意] [拒绝]
陈亮2013-05-13 13:58:04
ScgiServer.py 直接替换原有的这个文件
陈亮2013-05-13 13:58:13
post_data支持了上传文件
Leo chen2013-05-13 13:58:37
对的，就是看到了那个，我们比较一下
 2013-05-13 13:58:39
您同意了接收文件"post_data.py".
 2013-05-13 13:58:40
您同意了接收文件"ScgiServer.py".
 2013-05-13 13:58:40
对方取消了接收文件"post_data.py"或传输错误,文件传输失败.
 2013-05-13 13:58:44
文件"ScgiServer.py"传输成功.
陈亮2013-05-13 13:58:53
是的
陈亮2013-05-13 13:59:03
修改了最后面， 时间判断
Leo chen2013-05-13 13:59:16
明白了，我让他们测试一下
陈亮2013-05-13 13:59:20
好的
 2013-05-13 13:59:30
对方取消了接收文件"post_data.py",文件传输失败.
陈亮2013-05-13 13:59:55
如果处理有些东西时间长timeout要设置长点，
陈亮2013-05-13 14:00:05
否则就断开了
Leo chen2013-05-13 14:00:26
好的
陈亮2013-05-13 14:00:26
scgi_server = SCGI_SERVER(server_ip = '127.0.0.1',
server_port = SCGI_SERVER_PORT,
handler = handler,
timeout = 5)
陈亮2013-05-13 14:00:34
timeout = 30)
Leo chen2013-05-13 14:00:50
上传文件大，就要拉长？
陈亮2013-05-13 14:01:04
是的
陈亮2013-05-13 14:01:17
不需要
陈亮2013-05-13 14:01:27
是异步的， 不需要的
陈亮2013-05-13 14:01:39
只是做一些操作很费时间的话要的
Leo chen2013-05-13 14:01:53
socket超时？网络不好？
陈亮2013-05-13 14:02:02
是的
陈亮2013-05-13 14:02:14
所以20秒吧， 短是为了防止攻击
Leo chen2013-05-13 14:02:37
恩，好的，我们也测试一下
Leo chen2013-05-13 14:03:08
post_data.py 没收下来
陈亮2013-05-13 14:02:52
好的
陈亮2013-05-13 14:03:49
这个是解析post数据用的
 2013-05-13 14:03:54
对方给您发送文件:
 post_data.py [同意] [拒绝]
 2013-05-13 14:03:55
您同意了接收文件"post_data.py".
 2013-05-13 14:03:58
文件"post_data.py"传输成功.
陈亮2013-05-13 14:04:05
ScgiServer.py本来支持post
陈亮2013-05-13 14:04:24
只是包含文件上传的post数据，
Leo chen2013-05-13 14:04:46
文件上传的post头解析？
Leo chen2013-05-13 14:06:03
ok le， thx
陈亮2013-05-13 14:06:40
ok
